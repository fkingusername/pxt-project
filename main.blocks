<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="rAnwT{{VON6na?,%=5(s">key</variable><variable id="1pO$8]/MV[S{H)LZoJA6">value</variable><variable id="SFw2dc)`?}q(vwmeeBZT">RFID_Value</variable><variable id="O;qC=X:m1GILk{m~6#md">status</variable><variable id="L/uU1Q48uDQxd.,4]jFv">book_value</variable><variable id="D*mBwO*09Uz_2OGkh?7I">ONOFF</variable><variable id="1-ysew}BT@8qR?`y!@.p">time</variable></variables><block type="function_definition" x="9" y="16"><mutation name="LIGHT" functionid="N|vS1*QE/nl]G$.(4]T:"/><field name="function_name">LIGHT</field><statement name="STACK"><block type="controls_if"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">LT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_light_level"/></value><value name="B"><shadow type="math_number"><field name="NUM">180</field></shadow></value></block></value><statement name="DO0"><block type="device_set_brightness"><value name="value"><shadow type="math_number_minmax"><mutation min="0" max="255" label="Number" precision="0"/><field name="SLIDER">180</field></shadow></value></block></statement><statement name="ELSE"><block type="device_set_brightness"><value name="value"><shadow type="math_number_minmax"><mutation min="0" max="255" label="Number" precision="0"/><field name="SLIDER">180</field></shadow></value></block></statement></block></statement></block><block type="device_forever" x="906" y="101"><statement name="HANDLER"><block type="controls_if"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="D*mBwO*09Uz_2OGkh?7I">ONOFF</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="function_call"><mutation name="RETURNLOCK" functionid="q1/H/9:cA`yLSU/bh+$G"/><next><block type="mc_kt_subscribe_topic"><value name="topics"><shadow type="text"><field name="TEXT">LL3AS6C</field></shadow></value><next><block type="powerbrick_rfidprobe"/></next></block></next></block></statement><statement name="ELSE"><block type="device_show_leds"><field name="LEDS">`
        . . . . . 
        . . . . . 
        . . . . . 
        . . . . . 
        . . . . .
        `</field><next><block type="function_call"><mutation name="CHECK" functionid="3WzvsfP=pzGXg}8{K7){"/><next><block type="function_call"><mutation name="LIGHT" functionid="N|vS1*QE/nl]G$.(4]T:"/><next><block type="variables_set"><field name="VAR" id="1-ysew}BT@8qR?`y!@.p">time</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic"><field name="OP">ADD</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="1-ysew}BT@8qR?`y!@.p">time</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block></value><next><block type="device_pause"><value name="pause"><shadow type="timePicker"><field name="ms">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type="pxt-on-start" x="1604" y="224"><statement name="HANDLER"><block type="variables_set"><field name="VAR" id="D*mBwO*09Uz_2OGkh?7I">ONOFF</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow></value><next><block type="variables_set"><field name="VAR" id="1-ysew}BT@8qR?`y!@.p">time</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow></value><next><block type="mc_kt_config_pwbrick"><field name="port">Makercloud_Kitten.SerialPorts.PORT2</field><next><block type="mc_kt_init"><next><block type="mc_kt_wifi_setup"><value name="ssid"><shadow type="text"><field name="TEXT">CityU_WPA</field></shadow></value><value name="password"><shadow type="text"><field name="TEXT">P@ssw0rd </field></shadow></value><next><block type="mc_kt_connect_mqtt"/></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" x="-610" y="397"><mutation name="UNLOCK" functionid="6*YD{n%OP?.4;+^RGadc"/><field name="function_name"/><statement name="STACK"><block type="controls_if"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="powerbrick_ultrasonic"><field name="port">powerbrick.Ports.PORT1</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">10</field></shadow></value></block></value><statement name="DO0"><block type="powerbrick_servo"><field name="index">powerbrick.Servos.S1</field><value name="degree"><shadow type="math_number_minmax"><mutation min="-45" max="225" label="Number" precision="0"/><field name="SLIDER">-45</field></shadow></value><next><block type="powerbrick_motor_run"><field name="index">powerbrick.Motors.M1</field><value name="speed"><shadow type="math_number_minmax"><mutation min="-255" max="255" label="Number" precision="0"/><field name="SLIDER">-45</field></shadow></value></block></next></block></statement><statement name="ELSE"><block type="powerbrick_stop"><field name="index">powerbrick.Motors.M1</field></block></statement></block></statement></block><block type="function_definition" x="0" y="395"><mutation name="RETURNLOCK" functionid="q1/H/9:cA`yLSU/bh+$G"/><field name="function_name">RETURNLOCK</field><statement name="STACK"><block type="controls_if"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="powerbrick_ultrasonic"><field name="port">powerbrick.Ports.PORT1</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">5</field></shadow></value></block></value><statement name="DO0"><block type="powerbrick_motor_run"><field name="index">powerbrick.Motors.M1</field><value name="speed"><shadow type="math_number_minmax"><mutation min="-255" max="255" label="Number" precision="0"/><field name="SLIDER">45</field></shadow></value></block></statement><statement name="ELSE"><block type="powerbrick_stop"><field name="index">powerbrick.Motors.M1</field><next><block type="powerbrick_servo"><field name="index">powerbrick.Servos.S1</field><value name="degree"><shadow type="math_number_minmax"><mutation min="-45" max="225" label="Number" precision="0"/><field name="SLIDER">45</field></shadow></value></block></next></block></statement></block></statement></block><block type="function_definition" x="6" y="837"><mutation name="CHECK" functionid="3WzvsfP=pzGXg}8{K7){"/><field name="function_name">CHECK</field><statement name="STACK"><block type="controls_if"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_temperature"/></value><value name="B"><shadow type="math_number"><field name="NUM">25</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="deviceisgesture"><field name="gesture">Gesture.ThreeG</field></block></value></block></value><statement name="ELSE"><block type="controls_if"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">LT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="1-ysew}BT@8qR?`y!@.p">time</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">900</field></shadow></value></block></value><statement name="DO0"><block type="variables_set"><field name="VAR" id="L/uU1Q48uDQxd.,4]jFv">book_value</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text"><field name="TEXT"/></block></value><next><block type="controls_if"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="L/uU1Q48uDQxd.,4]jFv">book_value</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text"><field name="TEXT">booked</field></block></value></block></value><statement name="DO0"><block type="basic_show_icon"><field name="i">IconNames.No</field></block></statement><statement name="ELSE"><block type="device_show_leds"><field name="LEDS">`
        . # # # . 
        # . . . # 
        . . . # . 
        . . # . . 
        . . # . .
        `</field></block></statement></block></next></block></statement><statement name="ELSE"><block type="variables_set"><field name="VAR" id="D*mBwO*09Uz_2OGkh?7I">ONOFF</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow></value><next><block type="variables_set"><field name="VAR" id="1-ysew}BT@8qR?`y!@.p">time</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow></value></block></next></block></statement></block></statement></block></statement></block><block type="powerbrick_onrfidpresent" x="1160" y="993"><statement name="HANDLER"><block type="mc_kt_subscribe_topic"><value name="topics"><shadow type="text"><field name="TEXT">AP5WE9Q</field></shadow></value><next><block type="controls_if"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="powerbrick_rfiduuid"/></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="SFw2dc)`?}q(vwmeeBZT">RFID_Value</field></block></value></block></value><statement name="DO0"><block type="variables_change"><field name="VAR" id="D*mBwO*09Uz_2OGkh?7I">ONOFF</field><value name="VALUE"><shadow type="math_number"><field name="NUM">1</field></shadow></value><next><block type="function_call"><mutation name="UNLOCK" functionid="6*YD{n%OP?.4;+^RGadc"/></block></next></block></statement></block></next></block></statement></block><block type="mc_kt_register_topic_key_value_message_handler" x="2344" y="978"><field name="HANDLER_key" id="O;qC=X:m1GILk{m~6#md">status</field><field name="HANDLER_value" id="L/uU1Q48uDQxd.,4]jFv">book_value</field><value name="topic"><shadow type="text"><field name="TEXT">LL3AS6C </field></shadow></value><statement name="HANDLER"><block type="controls_if"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="O;qC=X:m1GILk{m~6#md">status</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text"><field name="TEXT">status</field></block></value></block></value><statement name="DO0"><block type="controls_if"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="L/uU1Q48uDQxd.,4]jFv">book_value</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text"><field name="TEXT">booked</field></block></value></block></value><statement name="DO0"><block type="variables_change"><field name="VAR" id="D*mBwO*09Uz_2OGkh?7I">ONOFF</field><value name="VALUE"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block></statement><statement name="ELSE"><block type="basic_show_icon"><field name="i">IconNames.Happy</field></block></statement></block></statement></block></statement></block><block type="mc_kt_register_topic_key_value_message_handler" x="1697" y="1014"><field name="HANDLER_key" id="rAnwT{{VON6na?,%=5(s">key</field><field name="HANDLER_value" id="1pO$8]/MV[S{H)LZoJA6">value</field><value name="topic"><shadow type="text"><field name="TEXT">AP5WE9Q </field></shadow></value><statement name="HANDLER"><block type="controls_if"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="rAnwT{{VON6na?,%=5(s">key</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text"><field name="TEXT">Booking</field></block></value></block></value><statement name="DO0"><block type="variables_set"><field name="VAR" id="SFw2dc)`?}q(vwmeeBZT">RFID_Value</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="1pO$8]/MV[S{H)LZoJA6">value</field></block></value></block></statement></block></statement></block><block type="device_button_event" x="1957" y="1638"><field name="NAME">Button.B</field><statement name="HANDLER"><block type="variables_set"><field name="VAR" id="D*mBwO*09Uz_2OGkh?7I">ONOFF</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow></value><next><block type="variables_set"><field name="VAR" id="1-ysew}BT@8qR?`y!@.p">time</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow></value><next><block type="device_print_message"><value name="text"><shadow type="text"><field name="TEXT">BYE</field></shadow></value></block></next></block></next></block></statement></block><block type="device_button_event" x="2519" y="1623"><field name="NAME">Button.A</field><statement name="HANDLER"><block type="controls_if"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="1-ysew}BT@8qR?`y!@.p">time</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">60</field></shadow></value></block></value><statement name="DO0"><block type="device_show_number"><value name="number"><block type="math_arithmetic"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="1-ysew}BT@8qR?`y!@.p">time</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">60</field></shadow></value></block></value><next><block type="device_print_message"><value name="text"><shadow type="text"><field name="TEXT">MIN</field></shadow></value><next><block type="device_show_number"><value name="number"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_modulo"><value name="DIVIDEND"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="1-ysew}BT@8qR?`y!@.p">time</field></block></value><value name="DIVISOR"><shadow type="math_number"><field name="NUM">60</field></shadow></value></block></value><next><block type="device_print_message"><value name="text"><shadow type="text"><field name="TEXT">S</field></shadow></value></block></next></block></next></block></next></block></statement><statement name="ELSE"><block type="device_show_number"><value name="number"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="1-ysew}BT@8qR?`y!@.p">time</field></block></value><next><block type="device_print_message"><value name="text"><shadow type="text"><field name="TEXT">S</field></shadow></value></block></next></block></statement></block></statement></block></xml>